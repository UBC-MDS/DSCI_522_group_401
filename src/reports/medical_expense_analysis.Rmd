---
title: "Medical Expense Data Analysis and Predictive Modeling"
author: "author: Karanpal	Singh, Sreejith	Munthikodu, Sirine	Chahma </br>"
date: "2020/01/24"
always_allow_html: true
output: 
  html_document:
    toc: true
bibliography: ../../docs/medical_expense_refs.bib
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message=FALSE)
library(feather)
library(tidyverse)
library(knitr)
library(caret)
library(ggridges)
library(ggthemes)
theme_set(theme_minimal())
set.seed(123)
```



```{r load data}
regression_error <- read.csv("../../reports/tables/regression_errors.csv")

```


# Summary

In this project, we attemps to build a regression model that will help us predict the medical expenses of a person regarding some information about this person (age, sex, number of children, if the person smokes and the region where the person is from). After trying different types of regressors (linear regression, decision tree regressor, knn regression, random forest regression and SVR), we found out that the decision tree regressor ended up being the best model regarding to our data. Our final regressor had satisfying results on an unseen data set, with a $R^2$ score of `r round(regression_error$test_data[4], 3)` on our test data set.

# Introduction

In this project, we attempt to build a predictive model that will answer the following question : "Given a person's information, what would be his/her predicted medical expenses?". Ansewering this question can be important for insurance compagnies who wants to evaluate the risk to insure a certain person regarding to his/her possible medical expenses. 

We also wanted to figure out if there is a significant difference of expenses between smokers and non-smokers, and between males and females. Therefore, we led two inferential studies asside in order to find an aswer to those questions.

# Methods

## Data
The Data we are using for this analysis is used in the book Machine Learning with R by Brett Lantz[@source]; which is a book that provides an introduction to machine learning using R. All of these datasets are in the public domain. The data explain the cost of a small sample of USA population Medical Insurance Cost based on attributes like age, sex, number of children etc. Additional information about this data can be found [here](https://gist.github.com/meperezcuello/82a9f1c1c473d6585e750ad2e3c05a41).

We didn't have to clean this data because there were no outliers or missing values, as described in [this](https://github.com/UBC-MDS/DSCI_522_group_401/blob/master/notebooks/EDA.ipynb) jupyter notebook.

# Exploratory analysis on the training data set 

- description
- plots
- observatons

# Answer the inferential research questions 

- probelm statement
- hypothesis test
- inference


# Build a predictive model 
- description
- model selection
- hyper-parameter tuning

# Evaluate the predictive model 
- model evaluation on train and test
- results
- regression plots

# References 



